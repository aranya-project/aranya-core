---
source: crates/aranya-policy-lang/tests/tests.rs
expression: ast
---
Policy {
    version: V2,
    ffi_imports: [],
    facts: [
        FactDefinition {
            immutable: false,
            identifier: "Foo" @ 5..8,
            key: [
                FieldDefinition {
                    identifier: "i" @ 9..10,
                    field_type: Int @ 11..14,
                },
            ],
            value: [
                FieldDefinition {
                    identifier: "n" @ 18..19,
                    field_type: Int @ 20..23,
                },
            ],
            span: 0..24,
        },
    ],
    actions: [
        ActionDefinition {
            persistence: Persistent,
            identifier: "foo" @ 32..35,
            arguments: [],
            statements: [
                Map(
                    MapStatement {
                        fact: FactLiteral {
                            identifier: "Foo" @ 48..51,
                            key_fields: [
                                (
                                    "i" @ 52..53,
                                    Expression(
                                        Int(
                                            1,
                                        ) @ 54..55,
                                    ),
                                ),
                            ],
                            value_fields: None,
                        },
                        identifier: "f" @ 60..61,
                        statements: [
                            FunctionCall(
                                FunctionCall {
                                    identifier: "process" @ 72..79,
                                    arguments: [
                                        Identifier(
                                            "f" @ 80..81,
                                        ) @ 80..81,
                                    ],
                                },
                            ) @ 72..82,
                        ],
                    },
                ) @ 44..88,
            ],
            span: 25..90,
        },
    ],
    effects: [],
    structs: [],
    enums: [],
    commands: [],
    functions: [],
    finish_functions: [],
    global_lets: [],
    text: "fact Foo[i int]=>{n int}\naction foo() {\n    map Foo[i:1] as f {\n        process(f)\n    }\n}\n",
}
