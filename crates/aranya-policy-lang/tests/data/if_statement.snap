---
source: crates/aranya-policy-lang/tests/tests.rs
expression: ast
---
Policy {
    version: V2,
    ffi_imports: [],
    facts: [],
    actions: [
        ActionDefinition {
            persistence: Persistent,
            identifier: "test" @ 7..11,
            arguments: [],
            statements: [
                If(
                    IfStatement {
                        branches: [
                            (
                                Int(
                                    0,
                                ) @ 23..24,
                                [
                                    Check(
                                        CheckStatement {
                                            expression: Int(
                                                1,
                                            ) @ 41..42,
                                        },
                                    ) @ 35..47,
                                ],
                            ),
                        ],
                        fallback: None,
                    },
                ) @ 20..54,
                If(
                    IfStatement {
                        branches: [
                            (
                                Int(
                                    0,
                                ) @ 57..58,
                                [
                                    Check(
                                        CheckStatement {
                                            expression: Int(
                                                1,
                                            ) @ 75..76,
                                        },
                                    ) @ 69..81,
                                ],
                            ),
                        ],
                        fallback: Some(
                            [
                                Check(
                                    CheckStatement {
                                        expression: Int(
                                            2,
                                        ) @ 104..105,
                                    },
                                ) @ 98..110,
                            ],
                        ),
                    },
                ) @ 54..111,
                If(
                    IfStatement {
                        branches: [
                            (
                                Int(
                                    0,
                                ) @ 120..121,
                                [
                                    Check(
                                        CheckStatement {
                                            expression: Int(
                                                1,
                                            ) @ 138..139,
                                        },
                                    ) @ 132..148,
                                    Let(
                                        LetStatement {
                                            identifier: "c" @ 152..153,
                                            expression: FunctionCall(
                                                FunctionCall {
                                                    identifier: "add" @ 156..159,
                                                    arguments: [
                                                        Int(
                                                            1,
                                                        ) @ 160..161,
                                                        Int(
                                                            1,
                                                        ) @ 163..164,
                                                    ],
                                                },
                                            ) @ 156..165,
                                        },
                                    ) @ 148..170,
                                ],
                            ),
                            (
                                Int(
                                    2,
                                ) @ 180..181,
                                [
                                    Check(
                                        CheckStatement {
                                            expression: Int(
                                                3,
                                            ) @ 198..199,
                                        },
                                    ) @ 192..204,
                                ],
                            ),
                            (
                                Int(
                                    4,
                                ) @ 214..215,
                                [
                                    Check(
                                        CheckStatement {
                                            expression: Int(
                                                5,
                                            ) @ 232..233,
                                        },
                                    ) @ 226..238,
                                ],
                            ),
                        ],
                        fallback: Some(
                            [
                                Check(
                                    CheckStatement {
                                        expression: Int(
                                            6,
                                        ) @ 261..262,
                                    },
                                ) @ 255..267,
                            ],
                        ),
                    },
                ) @ 117..268,
            ],
            span: 0..270,
        },
    ],
    effects: [],
    structs: [],
    enums: [],
    commands: [],
    functions: [],
    finish_functions: [],
    global_lets: [],
    text: "action test() {\n    if 0 {\n        check 1\n    }\n\n    if 0 {\n        check 1\n    } else {\n        check 2\n    }\n\n    if 0 {\n        check 1\n        let c = add(1, 1)\n    } else if 2 {\n        check 3\n    } else if 4 {\n        check 5\n    } else {\n        check 6\n    }\n}\n",
}
