---
source: crates/aranya-policy-lang/src/lang/parse/tests.rs
expression: policy
---
Policy {
    version: V2,
    ffi_imports: [],
    facts: [
        FactDefinition {
            immutable: false,
            identifier: Ident {
                name: "Foo",
                span: 14..17,
            },
            key: [
                FieldDefinition {
                    identifier: Ident {
                        name: "i",
                        span: 18..19,
                    },
                    field_type: VType {
                        kind: Int,
                        span: 20..23,
                    },
                },
            ],
            value: [
                FieldDefinition {
                    identifier: Ident {
                        name: "n",
                        span: 27..28,
                    },
                    field_type: VType {
                        kind: Int,
                        span: 29..32,
                    },
                },
            ],
            span: 9..33,
        },
    ],
    actions: [
        ActionDefinition {
            persistence: Persistent,
            identifier: Ident {
                name: "foo",
                span: 49..52,
            },
            arguments: [],
            statements: [
                Statement {
                    kind: Map(
                        MapStatement {
                            fact: FactLiteral {
                                identifier: Ident {
                                    name: "Foo",
                                    span: 73..76,
                                },
                                key_fields: [
                                    (
                                        Ident {
                                            name: "i",
                                            span: 77..78,
                                        },
                                        Expression(
                                            Expression {
                                                kind: Int(
                                                    1,
                                                ),
                                                span: 79..80,
                                            },
                                        ),
                                    ),
                                ],
                                value_fields: None,
                            },
                            identifier: Ident {
                                name: "f",
                                span: 85..86,
                            },
                            statements: [],
                        },
                    ),
                    span: 69..102,
                },
            ],
            span: 42..112,
        },
    ],
    effects: [],
    structs: [],
    enums: [],
    commands: [],
    functions: [],
    finish_functions: [],
    global_lets: [],
    text: "\n        fact Foo[i int]=>{n int}\n        action foo() {\n            map Foo[i:1] as f {\n            }\n        }\n    ",
}
