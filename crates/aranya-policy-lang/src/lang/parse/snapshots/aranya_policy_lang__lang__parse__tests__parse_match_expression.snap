---
source: crates/aranya-policy-lang/src/lang/parse/tests.rs
expression: policy
---
Policy {
    version: V2,
    ffi_imports: [],
    facts: [],
    actions: [
        ActionDefinition {
            persistence: Persistent,
            identifier: Ident {
                name: "foo",
                span: 16..19,
            },
            arguments: [
                FieldDefinition {
                    identifier: Ident {
                        name: "n",
                        span: 20..21,
                    },
                    field_type: VType {
                        kind: Int,
                        span: 22..25,
                    },
                },
            ],
            statements: [
                Statement {
                    kind: Let(
                        LetStatement {
                            identifier: Ident {
                                name: "x",
                                span: 45..46,
                            },
                            expression: Expression {
                                kind: Match(
                                    MatchExpression {
                                        scrutinee: Expression {
                                            kind: Identifier(
                                                Ident {
                                                    name: "n",
                                                    span: 55..56,
                                                },
                                            ),
                                            span: 55..56,
                                        },
                                        arms: [
                                            MatchExpressionArm {
                                                pattern: Values(
                                                    [
                                                        Expression {
                                                            kind: Int(
                                                                0,
                                                            ),
                                                            span: 75..76,
                                                        },
                                                    ],
                                                ),
                                                expression: Expression {
                                                    kind: Block(
                                                        [
                                                            Statement {
                                                                kind: Let(
                                                                    LetStatement {
                                                                        identifier: Ident {
                                                                            name: "x",
                                                                            span: 106..107,
                                                                        },
                                                                        expression: Expression {
                                                                            kind: Bool(
                                                                                true,
                                                                            ),
                                                                            span: 110..114,
                                                                        },
                                                                    },
                                                                ),
                                                                span: 102..135,
                                                            },
                                                        ],
                                                        Expression {
                                                            kind: Identifier(
                                                                Ident {
                                                                    name: "x",
                                                                    span: 137..138,
                                                                },
                                                            ),
                                                            span: 137..138,
                                                        },
                                                    ),
                                                    span: 80..156,
                                                },
                                                span: 75..173,
                                            },
                                            MatchExpressionArm {
                                                pattern: Default(
                                                    173..174,
                                                ),
                                                expression: Expression {
                                                    kind: Bool(
                                                        false,
                                                    ),
                                                    span: 178..183,
                                                },
                                                span: 173..196,
                                            },
                                        ],
                                    },
                                ),
                                span: 49..197,
                            },
                        },
                    ),
                    span: 41..206,
                },
            ],
            span: 9..207,
        },
    ],
    effects: [],
    structs: [],
    enums: [],
    commands: [],
    functions: [],
    finish_functions: [],
    global_lets: [],
    text: "\n        action foo(n int) {\n            let x = match n {\n                0 => {\n                    let x = true\n                    : x\n                }\n                _ => false\n            }\n        }\n    ",
}
