---
source: crates/aranya-policy-lang/src/lang/parse/tests.rs
expression: policy
---
Policy {
    version: V2,
    ffi_imports: [],
    facts: [],
    actions: [],
    effects: [],
    structs: [
        StructDefinition {
            identifier: Ident {
                name: "Foo",
                span: 7..10,
            },
            items: [
                Field(
                    FieldDefinition {
                        identifier: Ident {
                            name: "x",
                            span: 25..26,
                        },
                        field_type: VType {
                            kind: Int,
                            span: 27..30,
                        },
                    },
                ),
            ],
            span: 0..40,
        },
    ],
    enums: [],
    commands: [],
    functions: [
        FunctionDefinition {
            identifier: Ident {
                name: "convert",
                span: 59..66,
            },
            arguments: [
                FieldDefinition {
                    identifier: Ident {
                        name: "foo",
                        span: 67..70,
                    },
                    field_type: VType {
                        kind: Struct(
                            Ident {
                                name: "Foo",
                                span: 78..81,
                            },
                        ),
                        span: 71..81,
                    },
                },
            ],
            return_type: VType {
                kind: Struct(
                    Ident {
                        name: "Bar",
                        span: 90..93,
                    },
                ),
                span: 83..93,
            },
            statements: [
                Statement {
                    kind: Return(
                        ReturnStatement {
                            expression: Expression {
                                kind: NamedStruct(
                                    NamedStruct {
                                        identifier: Ident {
                                            name: "Bar",
                                            span: 115..118,
                                        },
                                        fields: [
                                            (
                                                Ident {
                                                    name: "y",
                                                    span: 121..122,
                                                },
                                                Expression {
                                                    kind: Dot(
                                                        Expression {
                                                            kind: Identifier(
                                                                Ident {
                                                                    name: "foo",
                                                                    span: 124..127,
                                                                },
                                                            ),
                                                            span: 124..127,
                                                        },
                                                        Ident {
                                                            name: "x",
                                                            span: 128..129,
                                                        },
                                                    ),
                                                    span: 124..129,
                                                },
                                            ),
                                        ],
                                        sources: [
                                            Ident {
                                                name: "baz",
                                                span: 134..137,
                                            },
                                            Ident {
                                                name: "thud",
                                                span: 142..146,
                                            },
                                        ],
                                    },
                                ),
                                span: 115..148,
                            },
                        },
                    ),
                    span: 108..157,
                },
            ],
            span: 50..158,
        },
    ],
    finish_functions: [],
    global_lets: [],
    text: "struct Foo {\n            x int\n        }\n\n        function convert(foo struct Foo) struct Bar {\n            return Bar { y: foo.x, ...baz, ...thud }\n        }",
}
